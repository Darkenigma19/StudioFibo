{
  "name": "product_with_sketch",
  "description": "Product photography with ControlNet sketch guidance for precise composition",
  "comfyui_version": "0.1.0",
  "nodes": {
    "checkpoint_loader": {
      "id": 1,
      "class_type": "CheckpointLoaderSimple",
      "inputs": {
        "ckpt_name": "bria_fibo_v2.3.safetensors"
      }
    },
    "controlnet_loader": {
      "id": 2,
      "class_type": "ControlNetLoader",
      "inputs": {
        "control_net_name": "control_v11p_sd15_lineart.pth"
      }
    },
    "load_sketch": {
      "id": 3,
      "class_type": "LoadImage",
      "inputs": {
        "image": "{controlnet.image_ref}"
      }
    },
    "controlnet_apply": {
      "id": 4,
      "class_type": "ControlNetApply",
      "inputs": {
        "conditioning": ["7", 0],
        "control_net": ["2", 0],
        "image": ["3", 0],
        "strength": "{controlnet.strength}"
      }
    },
    "clip_text_encode_positive": {
      "id": 7,
      "class_type": "CLIPTextEncode",
      "inputs": {
        "text": "{scene.description}",
        "clip": ["1", 1]
      }
    },
    "clip_text_encode_negative": {
      "id": 8,
      "class_type": "CLIPTextEncode",
      "inputs": {
        "text": "blurry, low quality, distorted, watermark",
        "clip": ["1", 1]
      }
    },
    "empty_latent": {
      "id": 9,
      "class_type": "EmptyLatentImage",
      "inputs": {
        "width": 1024,
        "height": 1024,
        "batch_size": 1
      }
    },
    "ksampler": {
      "id": 10,
      "class_type": "KSampler",
      "inputs": {
        "seed": "{scene.seed}",
        "steps": 30,
        "cfg": "{camera.lens.focal_length_mm / 10}",
        "sampler_name": "euler_ancestral",
        "scheduler": "normal",
        "denoise": 1.0,
        "model": ["1", 0],
        "positive": ["4", 0],
        "negative": ["8", 0],
        "latent_image": ["9", 0]
      }
    },
    "vae_decode": {
      "id": 11,
      "class_type": "VAEDecode",
      "inputs": {
        "samples": ["10", 0],
        "vae": ["1", 2]
      }
    },
    "save_image": {
      "id": 12,
      "class_type": "SaveImage",
      "inputs": {
        "images": ["11", 0],
        "filename_prefix": "studioflow_product"
      }
    }
  },
  "field_mappings": {
    "scene.description": "nodes.clip_text_encode_positive.inputs.text",
    "scene.seed": "nodes.ksampler.inputs.seed",
    "camera.lens.focal_length_mm": "nodes.ksampler.inputs.cfg",
    "controlnet.image_ref": "nodes.load_sketch.inputs.image",
    "controlnet.strength": "nodes.controlnet_apply.inputs.strength"
  },
  "notes": [
    "CFG scale derived from focal length: wider lens = lower CFG (more creative)",
    "Lineart ControlNet works best with clean sketch references",
    "For color sketches, use control_v11p_sd15_scribble instead"
  ]
}
